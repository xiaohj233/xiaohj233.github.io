<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>”深蓝-Lite” 无人测绘船完整技术方案 | 233-909!</title><meta name="keywords" content="博客"><meta name="author" content="晓嘿君"><meta name="copyright" content="晓嘿君"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="”深蓝-Lite” 无人测绘船完整技术方案"><meta name="application-name" content="”深蓝-Lite” 无人测绘船完整技术方案"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="”深蓝-Lite” 无人测绘船完整技术方案"><meta property="og:url" content="http://www.233909.xyz/posts/ac3752f6/index.html"><meta property="og:site_name" content="233-909!"><meta property="og:description" content="“深蓝-Lite” 无人测绘船完整技术方案1. 项目概述 (Executive Summary)本系统旨在构建一艘低成本（&amp;lt;5000 RMB）、长续航的无人水面艇（USV）。它具备自动巡航、垂直海洋剖面数据采集能力。系统采用“双模通讯”策略：在远海利用北斗卫星进行低带宽状态监控，在近岸&amp;amp;#x2"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://bu.dusays.com/2025/09/05/68ba5cf5568da.png"><meta property="article:author" content="晓嘿君"><meta property="article:tag" content="[&quot;博客&quot;]"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://bu.dusays.com/2025/09/05/68ba5cf5568da.png"><meta name="description" content="“深蓝-Lite” 无人测绘船完整技术方案1. 项目概述 (Executive Summary)本系统旨在构建一艘低成本（&amp;lt;5000 RMB）、长续航的无人水面艇（USV）。它具备自动巡航、垂直海洋剖面数据采集能力。系统采用“双模通讯”策略：在远海利用北斗卫星进行低带宽状态监控，在近岸&amp;amp;#x2"><link rel="shortcut icon" href="/img/xiao.svg"><link rel="canonical" href="http://www.233909.xyz/posts/ac3752f6/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="codeva-oRgZAaBiqa"/><meta name="msvalidate.01" content="14F71ECBE69879A3EF46FD53914335DD"/><link rel="manifest" href="/manifest.json"/><meta name="msapplication-TileColor" content="var(--anzhiyu-main)"/><link rel="mask-icon" href="/img/xiao.svg" color="#5bbad5"/><link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png"/><link rel="apple-touch-icon-precomposed" sizes="180x180" href="/img/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/img/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/img/favicon.ico"/><link rel="bookmark" href="/img/pwa-512x512.png"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2048-2732.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2732-2048.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1668-2388.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2388-1668.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1536-2048.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2048-1536.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1668-2224.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2224-1668.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1620-2160.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2160-1620.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1290-2796.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2796-1290.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1179-2556.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2556-1179.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1284-2778.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2778-1284.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1170-2532.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2532-1170.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1125-2436.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2436-1125.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1242-2688.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2688-1242.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-828-1792.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1792-828.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1242-2208.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2208-1242.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-750-1334.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1334-750.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-640-1136.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1136-640.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://bu.dusays.com/2023/03/03/6401a7904ff3a.png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: undefined,
  LA51: undefined,
  greetingBox: {"enable":true,"default":"夜猫子收工！马克思说睡眠也是生产力🌙","list":[{"greeting":"凌晨的灯光属于唯物主义者！但健康第一🌌","startTime":0,"endTime":5},{"greeting":"早啊达瓦里氏！以饱满的姿态应对生活吧！","startTime":6,"endTime":9},{"greeting":"达瓦里氏你就像10点钟太阳一样耀眼☀️","startTime":10,"endTime":10},{"greeting":"恩格斯说食物是劳动力的第一再生产🍞","startTime":11,"endTime":11},{"greeting":"午间辩证法：午睡30分钟≈下午续航2小时⚡","startTime":12,"endTime":14},{"greeting":"下午活力补给！偷偷塞你颗糖🍬","startTime":14,"endTime":18},{"greeting":"达瓦里氏多吃点，今天辛苦啦！🍛","startTime":19,"endTime":19},{"greeting":"晚上放松时间，做点让自己开心的事吧～🎧","startTime":20,"endTime":24}]},
  twikooEnvId: 'https://www.review.233909.xyz/',
  commentBarrageConfig:{"enable":true,"maxBarrage":1,"barrageTime":4000,"accessToken":"7a8e9884f15187534ec5e1f61ed201a6","mailMd5":"2162a1dd755f0bd201b072841ece1e11"},
  music_page_default: "custom",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["❤️ 不忘初心，牢记使命"]},
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: 晓嘿君","link":"链接: ","source":"来源: 233-909!","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '233-909!',
  title: '”深蓝-Lite” 无人测绘船完整技术方案',
  postAI: '',
  pageFillDescription: '深蓝-Lite 无人测绘船完整技术方案, 1. 项目概述 (Executive Summary), 2. 系统架构 (System Architecture), 2.1 硬件拓扑, 2.2 数据链路逻辑, 3. 详细硬件 BOM 表与预算分配 (总预算 4950 元), 4. 关键技术实现细节, 4.1 垂系阵列设计 (The Vertical Stick), 4.2 双控系统 (STM32 + APM), 4.3 卫星心跳协议 (Beidou Protocol), 5. 任务执行全流程 (Mission Profile), 阶段一：部署与自检, 阶段二：静默测绘 (离岸作业), 阶段三：返航与上传, 阶段四：云端处理 (后期), 6. 风险评估与对策, 7. 下一步行动建议深蓝无人测绘船完整技术方案项目概述本系统旨在构建一艘低成本长续航的无人水面艇它具备自动巡航垂直海洋剖面数据采集能力系统采用双模通讯策略在远海利用北斗卫星进行低带宽状态监控在近岸返航后利用网络回传海量测绘数据最终目标是通过云平台处理数据绘制带有垂直深度的三维海底水体地图系统架构硬件拓扑系统分为三个核心物理部分水面母船承载动力能源主控及通讯模块垂系阵列柔性连接的传感器串负责接收回波信号云端中心数据接收清洗与可视化平台数据链路逻辑采集层传感器阵列主控采集初步滤波卡全量存储监控层远海北斗模组卫星你的手机服务器仅发送位置电量当前深度异常报警传输层返航模组上传云服务器上传全量卡数据详细硬件表与预算分配总预算元这是基于淘宝闲鱼行情的极限压缩成本需具备较强动手能力子系统组件名称规格说明预估价格主控与导航飞控套装含罗盘负责自动驾驶走直线返航开发板系统大脑负责控制传感器读写卡管理通讯通讯模块北斗短报文模组支持通信如拆机件或兼容模块模块模组低功耗支持透传动力与能源磷酸铁锂电池核心投资提供约能量续航防水电调双向电调低防水无刷电机差速转向无舵机设计低转速高扭矩省电传感器阵列改装探鱼器探头仅作为发射源安装在船底压电陶瓷水听器自制压电片前置放大电路防水灌封姿态传感器高精度轴用于消除海浪影响船体结构管泡沫板树脂双体船设计稳定性最强防水接插件线材航空插头凯夫拉线密封胶杂项与备用不可预见费螺丝支架调试烧坏的元件总计关键技术实现细节垂系阵列设计为了节省每个节点放一个的高昂成本和防水难度采用主从式模拟阵列方案结构使用带屏蔽层的多芯拖缆末端挂重锤铅坠节点每隔米剥开线缆焊接一个压电陶瓷片接收器和一个微型前置放大器用环氧树脂灌封成水滴状原理船底的主探头发出声波声波打到海底反射个不同深度的水听器依次收到回波模拟信号通过电缆传回船上的通过同时采集路信号优势水下没有复杂的单片机只有简单的模拟电路极耐造且便宜双控系统为了防止你自己写的导航代码出导致丢船我们采用双核架构飞控司机负责底层你只需在地面站软件里点几个点它就能控制电机稳稳地走过去如果失联或没电它会自动触发回家模式老板负责业务它通过串口协议监视的状态位置速度它控制什么时候开始探测什么时候发卫星信号卫星心跳协议由于北斗短报文长度限制通常约字节次且有频次限制如分钟次通讯协议设计如下发送频率每分钟发送一次根据剩余电量自动调整数据包格式时间戳经度纬度剩余电压当前水深状态码状态码正常漏水电机堵转存储卡满任务执行全流程阶段一部署与自检在岸边组装船体连接垂系阵列上电自检传感器连接云端确认在线通过手机下发任务路径给飞控将船放入水中指令开始任务阶段二静默测绘离岸作业船只驶离信号区模组休眠作业循环触发声呐发射高速采集路水听器回波数据结合姿态数据打上时间戳写入卡安全循环每分钟唤醒北斗模块发送心跳包若检测到严重故障如进水立即发送并指令返航阶段三返航与上传完成所有航点自动执行模式返航回到近岸检测到信号恢复启动上传进程将卡中的数据文件可能几百压缩上传至云存储阶段四云端处理后期云服务器接收数据脚本读取数据根据个传感器的时间差进行波束形成处理剔除海浪造成的起伏误差利用经纬度和深度数据生成热力图或地形网格风险评估与对策防水失效最高风险对策电子舱使用透明防水盒乐扣乐扣改装并在盖子上打满硅橡胶船体内填充发泡剂保证就算漏水也不会沉渔网水草缠绕对策放弃裸露螺旋桨自制或购买涵道保护罩垂系阵列必须有弱连接设计如果阵列被海底挂住宁可断绳丢传感器也要保住船电量耗尽对策设置电压保护阈值当电量时强制中止任务返航下一步行动建议第一周购买开发板卡模块和超声波探头在桌面上调试代码实现发出声波接收回波存入卡的流程第二周购买北斗和模组调试通讯第三周购买飞控和动力套件组装原型船体这个方案完全在你的预算和技术能力范围内且具备极高的实用价值祝你的深蓝早日下水',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-12-25 18:49:15',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="/img/xiao.svg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://www.233909.xyz/" title="博客"><img class="back-menu-item-icon" src="/img/xiao.svg" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/Kur1oR3iko/Project-ESPNow" title="远程画板[贡献1.0.6版本]"><img class="back-menu-item-icon" src="https://s21.ax1x.com/2025/03/28/pEr2lWQ.webp" alt="远程画板[贡献1.0.6版本]"/><span class="back-menu-item-text">远程画板[贡献1.0.6版本]</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">233-909!</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/nav/"><i class="xiaohj-icon xiaohj-icon-compass faa-tada"></i><span> 导航</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" alt="微信" src="/null"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="/null"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/C%E8%AF%AD%E8%A8%80/" style="font-size: 1.05rem;">C语言<sup>3</sup></a><a href="/tags/Java/" style="font-size: 1.05rem;">Java<sup>1</sup></a><a href="/tags/%E3%80%8A%E5%A4%A7%E6%98%8E%E5%AF%B0%E5%AE%87%E3%80%8B/" style="font-size: 1.05rem;">《大明寰宇》<sup>1</sup></a><a href="/tags/%E4%B8%8A%E6%B5%B7%E4%B8%93%E5%8D%87%E6%9C%AC/" style="font-size: 1.05rem;">上海专升本<sup>1</sup></a><a href="/tags/%E4%BA%94%E5%B9%B4%E4%B8%80%E8%B4%AF%E5%88%B6/" style="font-size: 1.05rem;">五年一贯制<sup>1</sup></a><a href="/tags/%E4%BA%A4%E6%B5%81/" style="font-size: 1.05rem;">交流<sup>1</sup></a><a href="/tags/%E4%BA%BA%E5%B7%A5%E6%92%B0%E5%86%99/" style="font-size: 1.05rem;">人工撰写<sup>2</sup></a><a href="/tags/%E5%8D%87%E5%AD%A6%E8%A7%84%E5%88%92/" style="font-size: 1.05rem;">升学规划<sup>1</sup></a><a href="/tags/%E5%90%90%E6%A7%BD/" style="font-size: 1.05rem;">吐槽<sup>4</sup></a><a href="/tags/%E5%93%B2%E5%AD%A6/" style="font-size: 1.05rem;">哲学<sup>1</sup></a><a href="/tags/%E5%AD%A6%E4%B9%A0/" style="font-size: 1.05rem;">学习<sup>5</sup></a><a href="/tags/%E5%B0%8F%E8%AF%B4/" style="font-size: 1.05rem;">小说<sup>1</sup></a><a href="/tags/%E5%B7%A5%E4%B8%9A%E4%BA%92%E8%81%94%E7%BD%91/" style="font-size: 1.05rem;">工业互联网<sup>1</sup></a><a href="/tags/%E5%B9%95%E5%90%8E/" style="font-size: 1.05rem;">幕后<sup>1</sup></a><a href="/tags/%E5%B9%BD%E9%BB%98/" style="font-size: 1.05rem;">幽默<sup>2</sup></a><a href="/tags/%E6%84%9F%E6%83%B3/" style="font-size: 1.05rem;">感想<sup>1</sup></a><a href="/tags/%E6%9B%B4%E6%96%B0/" style="font-size: 1.05rem;">更新<sup>2</sup></a><a href="/tags/%E8%A7%86%E9%A2%91/" style="font-size: 1.05rem;">视频<sup>2</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A/" style="font-size: 1.05rem;">计算机专业<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/12/"><span class="card-archive-list-date">十二月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/11/"><span class="card-archive-list-date">十一月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/09/"><span class="card-archive-list-date">九月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/07/"><span class="card-archive-list-date">七月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/05/"><span class="card-archive-list-date">五月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/04/"><span class="card-archive-list-date">四月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/03/"><span class="card-archive-list-date">三月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/02/"><span class="card-archive-list-date">二月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="article-meta tags"></span></div></div><h1 class="post-title" itemprop="name headline">”深蓝-Lite” 无人测绘船完整技术方案</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-12-25T10:45:53.000Z" title="发表于 2025-12-25 18:45:53">2025-12-25</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-12-25T10:49:15.883Z" title="更新于 2025-12-25 18:49:15">2025-12-25</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span id="" data-flag-title="”深蓝-Lite” 无人测绘船完整技术方案"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="twikoo_visitors" title="访问量"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为上海"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>上海</span><span class="post-meta-separator"></span><span class="post-meta-commentcount"><i class="anzhiyufont anzhiyu-icon-comments post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/posts/ac3752f6/#post-comment" tabindex="-1"><span id="twikoo-count"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src=""></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://www.233909.xyz/posts/ac3752f6/"><header><h1 id="CrawlerTitle" itemprop="name headline">”深蓝-Lite” 无人测绘船完整技术方案</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">晓嘿君</span><time itemprop="dateCreated datePublished" datetime="2025-12-25T10:45:53.000Z" title="发表于 2025-12-25 18:45:53">2025-12-25</time><time itemprop="dateCreated datePublished" datetime="2025-12-25T10:49:15.883Z" title="更新于 2025-12-25 18:49:15">2025-12-25</time></header><h1 id="“深蓝-Lite”-无人测绘船完整技术方案"><a href="#“深蓝-Lite”-无人测绘船完整技术方案" class="headerlink" title="“深蓝-Lite” 无人测绘船完整技术方案"></a>“深蓝-Lite” 无人测绘船完整技术方案</h1><h2 id="1-项目概述-Executive-Summary"><a href="#1-项目概述-Executive-Summary" class="headerlink" title="1. 项目概述 (Executive Summary)"></a>1. 项目概述 (Executive Summary)</h2><p>本系统旨在构建一艘低成本（&lt;5000 RMB）、长续航的无人水面艇（USV）。它具备自动巡航、垂直海洋剖面数据采集能力。系统采用“双模通讯”策略：在远海利用北斗卫星进行低带宽状态监控，在近岸&#x2F;返航后利用 4G 网络回传海量测绘数据。最终目标是通过云平台处理数据，绘制带有垂直深度的三维海底&#x2F;水体地图。</p>
<hr>
<h2 id="2-系统架构-System-Architecture"><a href="#2-系统架构-System-Architecture" class="headerlink" title="2. 系统架构 (System Architecture)"></a>2. 系统架构 (System Architecture)</h2><h3 id="2-1-硬件拓扑"><a href="#2-1-硬件拓扑" class="headerlink" title="2.1 硬件拓扑"></a>2.1 硬件拓扑</h3><p>系统分为三个核心物理部分：</p>
<ol>
<li><strong>水面母船 (The Vessel):</strong> 承载动力、能源、主控及通讯模块。</li>
<li><strong>垂系阵列 (The Vertical Array):</strong> 柔性连接的传感器串，负责接收回波信号。</li>
<li><strong>云端中心 (The Cloud):</strong> 数据接收、清洗与可视化平台。</li>
</ol>
<h3 id="2-2-数据链路逻辑"><a href="#2-2-数据链路逻辑" class="headerlink" title="2.2 数据链路逻辑"></a>2.2 数据链路逻辑</h3><ul>
<li><strong>采集层:</strong> 传感器阵列 -&gt; STM32 主控 (ADC 采集&#x2F;初步滤波) -&gt; SD 卡 (全量存储)。</li>
<li><strong>监控层 (远海):</strong> STM32 -&gt; 北斗模组 -&gt; 卫星 -&gt; 你的手机&#x2F;服务器 (仅发送：位置、电量、当前深度、异常报警)。</li>
<li><strong>传输层 (返航):</strong> STM32 -&gt; 4G 模组 -&gt; HTTP&#x2F;MQTT 上传 -&gt; 云服务器 (上传全量 SD 卡数据)。</li>
</ul>
<hr>
<h2 id="3-详细硬件-BOM-表与预算分配-总预算-4950-元"><a href="#3-详细硬件-BOM-表与预算分配-总预算-4950-元" class="headerlink" title="3. 详细硬件 BOM 表与预算分配 (总预算: 4950 元)"></a>3. 详细硬件 BOM 表与预算分配 (总预算: 4950 元)</h2><p><em>这是基于淘宝&#x2F;闲鱼行情的极限压缩成本，需具备较强动手能力。</em></p>
<table>
<thead>
<tr>
<th><strong>子系统</strong></th>
<th><strong>组件名称</strong></th>
<th><strong>规格&#x2F;说明</strong></th>
<th><strong>预估价格 (RMB)</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>主控与导航</strong></td>
<td><strong>APM 2.8 飞控套装</strong></td>
<td>含 GPS、罗盘。负责自动驾驶、走直线、返航。</td>
<td>180</td>
</tr>
<tr>
<td></td>
<td><strong>STM32F407 开发板</strong></td>
<td>“系统大脑”。负责控制传感器、读写 SD 卡、管理通讯。</td>
<td>50</td>
</tr>
<tr>
<td><strong>通讯模块</strong></td>
<td><strong>北斗短报文模组</strong></td>
<td>支持 RDSS 通信，如 BD-4100 拆机件或兼容模块。</td>
<td>800</td>
</tr>
<tr>
<td></td>
<td><strong>Air724 4G 模块</strong></td>
<td>Cat.1 模组，低功耗，支持透传。</td>
<td>40</td>
</tr>
<tr>
<td><strong>动力与能源</strong></td>
<td><strong>4S 50Ah 磷酸铁锂电池</strong></td>
<td><strong>核心投资</strong>。提供约 600Wh 能量，续航 20km+。</td>
<td>1200</td>
</tr>
<tr>
<td></td>
<td><strong>30A 防水电调 x2</strong></td>
<td>双向电调。</td>
<td>100</td>
</tr>
<tr>
<td></td>
<td><strong>低 KV 防水无刷电机 x2</strong></td>
<td>差速转向（无舵机设计），低转速高扭矩，省电。</td>
<td>400</td>
</tr>
<tr>
<td><strong>传感器阵列</strong></td>
<td><strong>改装探鱼器探头</strong></td>
<td>200kHz，仅作为<strong>发射源</strong>安装在船底。</td>
<td>250</td>
</tr>
<tr>
<td></td>
<td><strong>压电陶瓷水听器 x5</strong></td>
<td>自制。压电片 + 前置放大电路 + 防水灌封。</td>
<td>200</td>
</tr>
<tr>
<td></td>
<td><strong>姿态传感器 (IMU)</strong></td>
<td>JY901S (高精度 9 轴)，用于消除海浪影响。</td>
<td>80</td>
</tr>
<tr>
<td><strong>船体结构</strong></td>
<td><strong>PVC 管&#x2F;泡沫板&#x2F;树脂</strong></td>
<td>双体船设计（Catamaran），稳定性最强。</td>
<td>600</td>
</tr>
<tr>
<td></td>
<td><strong>防水接插件&#x2F;线材</strong></td>
<td>航空插头、凯夫拉线、密封胶。</td>
<td>300</td>
</tr>
<tr>
<td><strong>杂项与备用</strong></td>
<td><strong>不可预见费</strong></td>
<td>螺丝、支架、调试烧坏的元件。</td>
<td>750</td>
</tr>
<tr>
<td><strong>总计</strong></td>
<td></td>
<td></td>
<td><strong>4950</strong></td>
</tr>
</tbody></table>
<hr>
<h2 id="4-关键技术实现细节"><a href="#4-关键技术实现细节" class="headerlink" title="4. 关键技术实现细节"></a>4. 关键技术实现细节</h2><h3 id="4-1-垂系阵列设计-The-“Vertical-Stick”"><a href="#4-1-垂系阵列设计-The-“Vertical-Stick”" class="headerlink" title="4.1 垂系阵列设计 (The “Vertical Stick”)"></a>4.1 垂系阵列设计 (The “Vertical Stick”)</h3><p>为了节省每个节点放一个 STM32 的高昂成本和防水难度，采用“主从式模拟阵列”方案：</p>
<ul>
<li><strong>结构:</strong> 使用带屏蔽层的多芯拖缆，末端挂重锤（铅坠）。</li>
<li><strong>节点:</strong> 每隔 X 米剥开线缆，焊接一个压电陶瓷片（接收器）和一个微型前置放大器，用环氧树脂灌封成水滴状。</li>
<li><strong>原理:</strong> 船底的主探头发出“Ping”声波 -&gt; 声波打到海底反射 -&gt; 5 个不同深度的水听器依次收到回波 -&gt; 模拟信号通过电缆传回船上的 STM32 -&gt; STM32 通过 ADC 同时采集 5 路信号。</li>
<li><strong>优势:</strong> 水下没有复杂的单片机，只有简单的模拟电路，极耐造且便宜。</li>
</ul>
<h3 id="4-2-双控系统-STM32-APM"><a href="#4-2-双控系统-STM32-APM" class="headerlink" title="4.2 双控系统 (STM32 + APM)"></a>4.2 双控系统 (STM32 + APM)</h3><p>为了防止你自己写的导航代码出 Bug 导致丢船，我们采用<strong>双核架构</strong>：</p>
<ul>
<li><strong>APM 飞控 (司机):</strong> 负责底层。你只需在地面站软件（Mission Planner）里点几个点，它就能控制电机稳稳地走过去。如果失联或没电，它会自动触发“RTL（回家）”模式。</li>
<li><strong>STM32 (老板):</strong> 负责业务。它通过串口（MAVLink 协议）监视 APM 的状态（位置、速度）。它控制什么时候开始探测，什么时候发卫星信号。</li>
</ul>
<h3 id="4-3-卫星心跳协议-Beidou-Protocol"><a href="#4-3-卫星心跳协议-Beidou-Protocol" class="headerlink" title="4.3 卫星心跳协议 (Beidou Protocol)"></a>4.3 卫星心跳协议 (Beidou Protocol)</h3><p>由于北斗短报文长度限制（通常约 70-100 字节&#x2F;次），且有频次限制（如 1 分钟 1 次），通讯协议设计如下：</p>
<ul>
<li><strong>发送频率:</strong> 每 10-30 分钟发送一次（根据剩余电量自动调整）。</li>
<li>数据包格式 (Hex):<br>[AA][时间戳][经度][纬度][剩余电压][当前水深][状态码][FF]<ul>
<li><em>状态码:</em> 00&#x3D;正常, 01&#x3D;漏水, 02&#x3D;电机堵转, 03&#x3D;存储卡满。</li>
</ul>
</li>
</ul>
<hr>
<h2 id="5-任务执行全流程-Mission-Profile"><a href="#5-任务执行全流程-Mission-Profile" class="headerlink" title="5. 任务执行全流程 (Mission Profile)"></a>5. 任务执行全流程 (Mission Profile)</h2><h3 id="阶段一：部署与自检"><a href="#阶段一：部署与自检" class="headerlink" title="阶段一：部署与自检"></a>阶段一：部署与自检</h3><ol>
<li>在岸边组装船体，连接垂系阵列。</li>
<li>上电，STM32 自检传感器，4G 连接云端确认“在线”。</li>
<li>通过手机下发任务路径（Waypoints）给 APM 飞控。</li>
<li>将船放入水中，指令“开始任务”。</li>
</ol>
<h3 id="阶段二：静默测绘-离岸作业"><a href="#阶段二：静默测绘-离岸作业" class="headerlink" title="阶段二：静默测绘 (离岸作业)"></a>阶段二：静默测绘 (离岸作业)</h3><ol>
<li>船只驶离 4G 信号区。4G 模组休眠。</li>
<li><strong>作业循环:</strong><ul>
<li>STM32 触发声呐发射。</li>
<li>STM32 高速采集 5 路水听器回波数据。</li>
<li>结合 IMU 姿态数据，打上 GPS 时间戳，写入 SD 卡。</li>
</ul>
</li>
<li><strong>安全循环:</strong><ul>
<li>每 10 分钟，STM32 唤醒北斗模块，发送心跳包。</li>
<li>若检测到严重故障（如进水），立即发送 SOS 并指令 APM 返航。</li>
</ul>
</li>
</ol>
<h3 id="阶段三：返航与上传"><a href="#阶段三：返航与上传" class="headerlink" title="阶段三：返航与上传"></a>阶段三：返航与上传</h3><ol>
<li>APM 完成所有航点，自动执行 RTL 模式返航。</li>
<li>回到近岸，STM32 检测到 4G 信号恢复。</li>
<li>STM32 启动 FTP&#x2F;HTTP 上传进程，将 SD 卡中的数据文件（可能几百 MB）压缩上传至云存储。</li>
</ol>
<h3 id="阶段四：云端处理-后期"><a href="#阶段四：云端处理-后期" class="headerlink" title="阶段四：云端处理 (后期)"></a>阶段四：云端处理 (后期)</h3><ol>
<li>云服务器接收数据。</li>
<li>Python 脚本读取数据，根据 5 个传感器的时间差进行<strong>波束形成 (Beamforming)</strong> 处理，剔除海浪造成的起伏误差。</li>
<li>利用经纬度和深度数据，生成热力图或 3D 地形网格。</li>
</ol>
<hr>
<h2 id="6-风险评估与对策"><a href="#6-风险评估与对策" class="headerlink" title="6. 风险评估与对策"></a>6. 风险评估与对策</h2><ol>
<li><strong>防水失效 (最高风险):</strong><ul>
<li><em>对策:</em> 电子舱使用透明防水盒（乐扣乐扣改装），并在盖子上打满 704 硅橡胶。船体内填充发泡剂，保证就算漏水也不会沉。</li>
</ul>
</li>
<li><strong>渔网&#x2F;水草缠绕:</strong><ul>
<li><em>对策:</em> 放弃裸露螺旋桨，自制或购买<strong>涵道保护罩</strong>。垂系阵列必须有弱连接设计（Weak Link），如果阵列被海底挂住，宁可断绳丢传感器，也要保住船。</li>
</ul>
</li>
<li><strong>电量耗尽:</strong><ul>
<li><em>对策:</em> 设置电压保护阈值。当电量 &lt;30% 时，强制中止任务返航。</li>
</ul>
</li>
</ol>
<h2 id="7-下一步行动建议"><a href="#7-下一步行动建议" class="headerlink" title="7. 下一步行动建议"></a>7. 下一步行动建议</h2><ol>
<li><strong>第一周:</strong> 购买 STM32F407 开发板、SD 卡模块和超声波探头。在桌面上调试代码，实现“发出声波-接收回波-存入 SD 卡”的流程。</li>
<li><strong>第二周:</strong> 购买北斗和 4G 模组，调试通讯。</li>
<li><strong>第三周:</strong> 购买 APM 飞控和动力套件，组装原型船体。</li>
</ol>
<p>这个方案完全在你的预算和技术能力范围内，且具备极高的实用价值。祝你的“深蓝-Lite”早日下水！</p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2025/09/05/68ba5cf5568da.png" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2025/09/05/68ba5cf5568da.png" title="头像" alt="头像"></a><div class="post-copyright__author_name">晓嘿君</div><div class="post-copyright__author_desc">星海横流，岁月成碑。</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://www.233909.xyz/posts/ac3752f6/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://www.233909.xyz/posts/ac3752f6/')">”深蓝-Lite” 无人测绘船完整技术方案</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://www.233909.xyz/posts/ac3752f6/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=”深蓝-Lite” 无人测绘船完整技术方案&amp;url=http://www.233909.xyz/posts/ac3752f6/&amp;pic=" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://www.233909.xyz" target="_blank">233-909!</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"></div></div></div><div class="post_share"><div class="social-share" data-image="https://bu.dusays.com/2025/04/28/680f628873f0e.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/posts/1c3bfe8a/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2025/04/28/680f628873f0e.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">英语U1、2第九、十一大题详解</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2025/09/05/68ba5cf5568da.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"/></div></div><div class="author-info__description">这里你可以看到一些杂七杂八的内容</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">晓嘿君</h1><div class="author-info__desc">星海横流，岁月成碑。</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/xiaohj233" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/1869551601" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到此网站</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%80%9C%E6%B7%B1%E8%93%9D-Lite%E2%80%9D-%E6%97%A0%E4%BA%BA%E6%B5%8B%E7%BB%98%E8%88%B9%E5%AE%8C%E6%95%B4%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88"><span class="toc-number">1.</span> <span class="toc-text">“深蓝-Lite” 无人测绘船完整技术方案</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E9%A1%B9%E7%9B%AE%E6%A6%82%E8%BF%B0-Executive-Summary"><span class="toc-number">1.1.</span> <span class="toc-text">1. 项目概述 (Executive Summary)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84-System-Architecture"><span class="toc-number">1.2.</span> <span class="toc-text">2. 系统架构 (System Architecture)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E7%A1%AC%E4%BB%B6%E6%8B%93%E6%89%91"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1 硬件拓扑</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E9%80%BB%E8%BE%91"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2 数据链路逻辑</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E8%AF%A6%E7%BB%86%E7%A1%AC%E4%BB%B6-BOM-%E8%A1%A8%E4%B8%8E%E9%A2%84%E7%AE%97%E5%88%86%E9%85%8D-%E6%80%BB%E9%A2%84%E7%AE%97-4950-%E5%85%83"><span class="toc-number">1.3.</span> <span class="toc-text">3. 详细硬件 BOM 表与预算分配 (总预算: 4950 元)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF%E5%AE%9E%E7%8E%B0%E7%BB%86%E8%8A%82"><span class="toc-number">1.4.</span> <span class="toc-text">4. 关键技术实现细节</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E5%9E%82%E7%B3%BB%E9%98%B5%E5%88%97%E8%AE%BE%E8%AE%A1-The-%E2%80%9CVertical-Stick%E2%80%9D"><span class="toc-number">1.4.1.</span> <span class="toc-text">4.1 垂系阵列设计 (The “Vertical Stick”)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E5%8F%8C%E6%8E%A7%E7%B3%BB%E7%BB%9F-STM32-APM"><span class="toc-number">1.4.2.</span> <span class="toc-text">4.2 双控系统 (STM32 + APM)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E5%8D%AB%E6%98%9F%E5%BF%83%E8%B7%B3%E5%8D%8F%E8%AE%AE-Beidou-Protocol"><span class="toc-number">1.4.3.</span> <span class="toc-text">4.3 卫星心跳协议 (Beidou Protocol)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E4%BB%BB%E5%8A%A1%E6%89%A7%E8%A1%8C%E5%85%A8%E6%B5%81%E7%A8%8B-Mission-Profile"><span class="toc-number">1.5.</span> <span class="toc-text">5. 任务执行全流程 (Mission Profile)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B6%E6%AE%B5%E4%B8%80%EF%BC%9A%E9%83%A8%E7%BD%B2%E4%B8%8E%E8%87%AA%E6%A3%80"><span class="toc-number">1.5.1.</span> <span class="toc-text">阶段一：部署与自检</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B6%E6%AE%B5%E4%BA%8C%EF%BC%9A%E9%9D%99%E9%BB%98%E6%B5%8B%E7%BB%98-%E7%A6%BB%E5%B2%B8%E4%BD%9C%E4%B8%9A"><span class="toc-number">1.5.2.</span> <span class="toc-text">阶段二：静默测绘 (离岸作业)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B6%E6%AE%B5%E4%B8%89%EF%BC%9A%E8%BF%94%E8%88%AA%E4%B8%8E%E4%B8%8A%E4%BC%A0"><span class="toc-number">1.5.3.</span> <span class="toc-text">阶段三：返航与上传</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B6%E6%AE%B5%E5%9B%9B%EF%BC%9A%E4%BA%91%E7%AB%AF%E5%A4%84%E7%90%86-%E5%90%8E%E6%9C%9F"><span class="toc-number">1.5.4.</span> <span class="toc-text">阶段四：云端处理 (后期)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E9%A3%8E%E9%99%A9%E8%AF%84%E4%BC%B0%E4%B8%8E%E5%AF%B9%E7%AD%96"><span class="toc-number">1.6.</span> <span class="toc-text">6. 风险评估与对策</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E4%B8%8B%E4%B8%80%E6%AD%A5%E8%A1%8C%E5%8A%A8%E5%BB%BA%E8%AE%AE"><span class="toc-number">1.7.</span> <span class="toc-text">7. 下一步行动建议</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/ac3752f6/" title="”深蓝-Lite” 无人测绘船完整技术方案">”深蓝-Lite” 无人测绘船完整技术方案</a><time datetime="2025-12-25T10:45:53.000Z" title="发表于 2025-12-25 18:45:53">2025-12-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/1c3bfe8a/" title="英语U1、2第九、十一大题详解"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2025/04/28/680f628873f0e.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="英语U1、2第九、十一大题详解"/></a><div class="content"><a class="title" href="/posts/1c3bfe8a/" title="英语U1、2第九、十一大题详解">英语U1、2第九、十一大题详解</a><time datetime="2025-11-13T08:06:14.000Z" title="发表于 2025-11-13 16:06:14">2025-11-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/7ec0dc64/" title="Python期中复习题-编程题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2025/04/28/680f628873f0e.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python期中复习题-编程题"/></a><div class="content"><a class="title" href="/posts/7ec0dc64/" title="Python期中复习题-编程题">Python期中复习题-编程题</a><time datetime="2025-11-12T11:04:20.566Z" title="发表于 2025-11-12 19:04:20">2025-11-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/9773523e/" title="网络基础模拟卷超详细精讲版"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2025/04/28/680f628873f0e.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="网络基础模拟卷超详细精讲版"/></a><div class="content"><a class="title" href="/posts/9773523e/" title="网络基础模拟卷超详细精讲版">网络基础模拟卷超详细精讲版</a><time datetime="2025-11-06T11:24:13.000Z" title="发表于 2025-11-06 19:24:13">2025-11-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/3e5dfac3/" title="网络基础模拟卷"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2025/04/28/680f628873f0e.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="网络基础模拟卷"/></a><div class="content"><a class="title" href="/posts/3e5dfac3/" title="网络基础模拟卷">网络基础模拟卷</a><time datetime="2025-11-06T11:22:29.000Z" title="发表于 2025-11-06 19:22:29">2025-11-06</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="workboard"><div id="runtimeTextTip"></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"/></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title="本站项目由Github托管"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Source-Github.svg" alt="本站项目由Github托管"/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"/></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2025 By <a class="footer-bar-link" href="/" title="晓嘿君" target="_blank">晓嘿君</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">20</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">19</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">4</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://www.233909.xyz/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/xiao.svg" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/Kur1oR3iko/Project-ESPNow" title="远程画板[贡献1.0.6版本]"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://s21.ax1x.com/2025/03/28/pEr2lWQ.webp" alt="远程画板[贡献1.0.6版本]"/><span class="back-menu-item-text">远程画板[贡献1.0.6版本]</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/nav/"><i class="xiaohj-icon xiaohj-icon-compass faa-tada"></i><span> 导航</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/C%E8%AF%AD%E8%A8%80/" style="font-size: 0.88rem;">C语言<sup>3</sup></a><a href="/tags/Java/" style="font-size: 0.88rem;">Java<sup>1</sup></a><a href="/tags/%E3%80%8A%E5%A4%A7%E6%98%8E%E5%AF%B0%E5%AE%87%E3%80%8B/" style="font-size: 0.88rem;">《大明寰宇》<sup>1</sup></a><a href="/tags/%E4%B8%8A%E6%B5%B7%E4%B8%93%E5%8D%87%E6%9C%AC/" style="font-size: 0.88rem;">上海专升本<sup>1</sup></a><a href="/tags/%E4%BA%94%E5%B9%B4%E4%B8%80%E8%B4%AF%E5%88%B6/" style="font-size: 0.88rem;">五年一贯制<sup>1</sup></a><a href="/tags/%E4%BA%A4%E6%B5%81/" style="font-size: 0.88rem;">交流<sup>1</sup></a><a href="/tags/%E4%BA%BA%E5%B7%A5%E6%92%B0%E5%86%99/" style="font-size: 0.88rem;">人工撰写<sup>2</sup></a><a href="/tags/%E5%8D%87%E5%AD%A6%E8%A7%84%E5%88%92/" style="font-size: 0.88rem;">升学规划<sup>1</sup></a><a href="/tags/%E5%90%90%E6%A7%BD/" style="font-size: 0.88rem;">吐槽<sup>4</sup></a><a href="/tags/%E5%93%B2%E5%AD%A6/" style="font-size: 0.88rem;">哲学<sup>1</sup></a><a href="/tags/%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem;">学习<sup>5</sup></a><a href="/tags/%E5%B0%8F%E8%AF%B4/" style="font-size: 0.88rem;">小说<sup>1</sup></a><a href="/tags/%E5%B7%A5%E4%B8%9A%E4%BA%92%E8%81%94%E7%BD%91/" style="font-size: 0.88rem;">工业互联网<sup>1</sup></a><a href="/tags/%E5%B9%95%E5%90%8E/" style="font-size: 0.88rem;">幕后<sup>1</sup></a><a href="/tags/%E5%B9%BD%E9%BB%98/" style="font-size: 0.88rem;">幽默<sup>2</sup></a><a href="/tags/%E6%84%9F%E6%83%B3/" style="font-size: 0.88rem;">感想<sup>1</sup></a><a href="/tags/%E6%9B%B4%E6%96%B0/" style="font-size: 0.88rem;">更新<sup>2</sup></a><a href="/tags/%E8%A7%86%E9%A2%91/" style="font-size: 0.88rem;">视频<sup>2</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A/" style="font-size: 0.88rem;">计算机专业<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="chat-btn" type="button" title="聊天"><i class="anzhiyufont anzhiyu-icon-comment-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><a id="switch-commentBarrage" href="javascript:anzhiyu.switchCommentBarrage();" title="开关弹幕"><i class="anzhiyufont anzhiyu-icon-danmu"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="2837369820" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://music.163.com/playlist?id=2837369820&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="https://cdn.cbd.int/hexo-theme-anzhiyu@1.6.14/source/js/utils.js"></script><script src="https://cdn.cbd.int/hexo-theme-anzhiyu@1.6.14/source/js/main.js"></script><script src="https://cdn.cbd.int/hexo-theme-anzhiyu@1.6.14/source/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("2025/02/15 17:51:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2025 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 晓嘿君 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script async="async">(function () {
  var grt = new Date("2025/02/15 17:51:00"); //设置网站上线时间
  var now = new Date();
  var dnum;
  var hnum;
  var mnum;
  var snum;
  var nowHour;

  // 计算并更新天数、小时数、分钟数和秒数
  function updateTime() {
    now = new Date(); // 更新 now 的值
    nowHour = now.getHours(); // 更新 nowHour 的值
    var days = (now - grt) / 1000 / 60 / 60 / 24;
    dnum = Math.floor(days);
    var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
    hnum = Math.floor(hours);
    if (String(hnum).length == 1) {
      hnum = "0" + hnum;
    }
    var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
    mnum = Math.floor(minutes);
    if (String(mnum).length == 1) {
      mnum = "0" + mnum;
    }
    var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
    snum = Math.round(seconds);
    if (String(snum).length == 1) {
      snum = "0" + snum;
    }
  }

  // 更新网页中显示的网站运行时间
  function updateHtml() {
    const footer = document.getElementById("footer");
    if (!footer) return
    let currentTimeHtml = "";
    if (nowHour < 18 && nowHour >= 9) {
      // 如果是上班时间，默认就是"安知鱼-上班摸鱼中.svg"图片，不需要更改
      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    } else {
      // 如果是下班时间，插入"安知鱼-下班啦.svg"图片
      let img = document.querySelector("#workboard .workSituationImg");
      if (img != null) {
        img.src = "";
        img.title = "";
        img.alt = "";
      }

      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    }

    if (document.getElementById("runtimeTextTip")) {
      document.getElementById("runtimeTextTip").innerHTML = currentTimeHtml;
    }
  }

  setInterval(() => {
    updateTime();
    updateHtml();
  }, 1000);
})();</script><div class="js-pjax"><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://www.review.233909.xyz/',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://www.review.233909.xyz/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"><script async src="https://cdn.cbd.int/hexo-theme-anzhiyu@1.6.14/source/js/anzhiyu/comment_barrage.js"></script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://www.review.233909.xyz/',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script>(() => {
  const isChatBtn = true
  const isChatHideShow = true

  if (isChatBtn) {
    const close = () => {
      Chatra('minimizeWidget')
      Chatra('hide')
    }

    const open = () => {
      Chatra('openChat', true)
      Chatra('show')
    }

    window.ChatraSetup = {
      startHidden: true
    }
  
    window.chatBtnFn = () => {
      const isShow = document.getElementById('chatra').classList.contains('chatra--expanded')
      isShow ? close() : open()
    }
  } else if (isChatHideShow) {
    window.chatBtn = {
      hide: () => {
        Chatra('hide')
      },
      show: () => {
        Chatra('show')
      }
    }
  }

  (function(d, w, c) {
    w.ChatraID = 'hEtM84cukuuxHo8QB'
    var s = d.createElement('script')
    w[c] = w[c] || function() {
        (w[c].q = w[c].q || []).push(arguments)
    }
    s.async = true
    s.src = 'https://call.chatra.io/chatra.js'
    if (d.head) d.head.appendChild(s)
  })(document, window, 'Chatra')

})()</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>